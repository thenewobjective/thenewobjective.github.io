var e={576:(e,t,s)=>{var r={"./sample-1.json":249};function i(e){var t=o(e);return s(t)}function o(e){if(!s.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=576},614:(e,t,s)=>{var r={"./default-70.png":272};function i(e){var t=o(e);return s(t)}function o(e){if(!s.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=614},272:(e,t,s)=>{e.exports=s.p+"4033ff12c4942273ada3.png"},249:e=>{e.exports=JSON.parse('{"id":"sample-1","width":10,"height":10,"tileSheetId":"default","tileIds":[[12,0,0,0,0,0,0,0,0,12],[12,76,76,76,76,76,76,76,76,12],[12,76,76,76,76,76,76,76,76,12],[12,76,76,76,76,76,76,76,76,12],[12,76,76,76,76,55,76,76,76,12],[12,76,76,76,55,55,55,76,76,12],[12,76,76,76,76,76,76,76,76,12],[12,76,76,76,76,76,76,76,76,12],[12,76,76,76,76,76,76,76,76,12],[115,103,103,103,103,103,103,103,103,91]]}')}},t={};function s(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,s),o.exports}s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;if("string"==typeof import.meta.url&&(e=import.meta.url),!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{class e{#e;get presenter(){return this.#e}set presenter(e){this.#e=e}#t;get repository(){return this.#t}set repository(e){this.#t=e}#s;get useCase(){return this.#s}set useCase(e){this.#s=e}}class t{presenter;repository;constructor(e,t){this.presenter=e,this.repository=t}async execute(e){const t=await this.repository.get(e);this.presenter.present(t)}}class r{id;width;height;tileSheet;tiles;constructor(e,t,s,r,i){this.id=e,this.width=t,this.height=s,this.tileSheet=r,this.tiles=i;const o=i.flat();if(o.length<1)throw new Error("TileMap must have at least one tile");if(o.some((e=>!r.tiles.includes(e))))throw new Error("TileMap cannot contain tiles not in its tileSheet");if(o.length!==t*s)throw new Error("TileMap must have width * height tiles")}}class i{id;tileSize;tiles;constructor(e,t,s){this.id=e,this.tileSize=t,this.tiles=s}}class o{id;size;image;constructor(e,t,s){this.id=e,this.size=t,this.image=s}}class a{#r=70;get defaultTileSize(){return this.#r}set defaultTileSize(e){this.#r=e}async#i(e,t){const s=await fetch(t),r=await s.blob(),i=await createImageBitmap(r),{width:a,height:n}=i,c=await Promise.all(Array.from({length:a/e*n/e},(async(t,s)=>{const r=s%(a/e)*e,n=Math.floor(s/(a/e))*e,c=await createImageBitmap(i,r,n,e,e);return new o(s,e,c)})));return i.close(),c}async get(e){const t=this.defaultTileSize,r=s(614)(`./${e}-${t}.png`),o=await this.#i(t,r);return new i(e,t,o)}async getBySize(e,t){const r=s(614)(`./${e}-${t}.png`),o=await this.#i(t,r);return new i(e,t,o)}}class n{#o=new a;async get(e){const t=s(576)(`./${e}.json`),{width:i,height:o,tileSheetId:a,tileIds:n}=t,c=await this.#o.get(a),h=n.map((e=>e.map((e=>c.tiles[e]))));return new r(e,i,o,c,h)}}class c{elContainer;constructor(e){this.elContainer=e}present({height:e,width:t,tiles:s}){const r=document.createElement("canvas"),i=r.getContext("2d"),o=s[0][0].size;Object.assign(r,{width:t*o,height:e*o}),s.forEach(((e,t)=>e.forEach((({image:e},s)=>i.drawImage(e,s*o,t*o))))),this.elContainer.appendChild(r)}}new class extends e{mapId;#e=new c(document.body);get presenter(){return this.#e}set presenter(e){this.#e=e}#t=new n;get repository(){return this.#t}set repository(e){this.#t=e}#s=new t(this.presenter,this.repository);get useCase(){return this.#s}set useCase(e){this.#s=e}constructor(e){super(),this.mapId=e}render(){this.useCase.execute(this.mapId)}}("sample-1").render()})();
//# sourceMappingURL=index.mjs.map